/******************************************************************************
 * This package is the root of all files regarding the "project management".
 *****************************************************************************/
package org.knipsX.controller.projectmanagement;

/* import classes from java sdk */
import java.awt.event.ActionEvent;
import javax.swing.JOptionPane;

import org.knipsX.controller.AbstractController;
import org.knipsX.model.projectmanagement.ProjectManagementModel;
import org.knipsX.model.projectview.ProjectModel;
import org.knipsX.utils.Validator;
import org.knipsX.view.projectmanagement.JProjectManagement;

/****************************************************************************************
 * Represents the actions which are done by pushing the project copy button.
 * Acts in harmony with JProjectManagement.
 * 
 * @param <M>
 *            The related model
 * @param <V>
 *            The related view
 ***************************************************************************************/
public class ProjectCopyController<M extends ProjectManagementModel, V extends JProjectManagement<?>> extends
        AbstractController<M, V> {

    /**
     * Constructor for ProjectCopyController
     * 
     * @param model
     *            The related model
     * @param view
     *            The related view
     */
    public ProjectCopyController(M model, V view) {
        super(model, view);
    }

    /**
     * A project has to be selected before.
     * It copies a selected project. The user has to give the copy a new name.
     * 
     * @see org.knipsX.controller.AbstractController#actionPerformed(java.awt.event.ActionEvent)
     * @param event
     *            The action event
     */
    @Override
    public void actionPerformed(final ActionEvent event) {

        final int[] toCopy = this.view.getSelectedProjects();

        /* only one project can copied at once */
        if (toCopy.length == 1) {

            /* get the selected project */
            final ProjectModel projectToCopy = this.model.getProjects().get(toCopy[0]);

            // INTERNATIONALIZE
<<<<<<< HEAD:Implementierung/src/org/knipsX/controller/projectmanagement/ProjectCopyController.java
            final int decision = JOptionPane.showConfirmDialog(null, Messages.getString("ProjectCopyController.0") //$NON-NLS-1$
                    + projectToCopy.getName() + Messages.getString("ProjectCopyController.1"), Messages.getString("ProjectCopyController.2"), JOptionPane.YES_NO_OPTION); //$NON-NLS-1$ //$NON-NLS-2$
=======
            final int decision = JOptionPane.showConfirmDialog(this.view, "Soll das ausgewählte Projekt \""
                    + projectToCopy.getName() + "\" kopiert werden?", "Projekt kopieren", JOptionPane.YES_NO_OPTION);
>>>>>>> 44fd20c5f0461be4bd8a4c755c4427684a386989:Implementierung/src/org/knipsX/controller/projectmanagement/ProjectCopyController.java

            /* if user pressed "yes" */
            if (decision == 0) {

                // INTERNATIONALIZE
                /* try to get a project name */
<<<<<<< HEAD:Implementierung/src/org/knipsX/controller/projectmanagement/ProjectCopyController.java
                String projectName = JOptionPane.showInputDialog(null, Messages.getString("ProjectCopyController.3"), //$NON-NLS-1$
                        Messages.getString("ProjectCopyController.4"), JOptionPane.INFORMATION_MESSAGE); //$NON-NLS-1$
=======
                String projectName = JOptionPane.showInputDialog(this.view, "Geben Sie einen Projektnamen ein.",
                        "Projekt kopieren", JOptionPane.INFORMATION_MESSAGE);
>>>>>>> 44fd20c5f0461be4bd8a4c755c4427684a386989:Implementierung/src/org/knipsX/controller/projectmanagement/ProjectCopyController.java

                /* user is not pressing cancel and no text or wrong text is given */
                if (projectName != null) {
                    if (!Validator.isStringOk(projectName)) {

                        /* show the user that the name is incorrect */
                        // INTERNATIONALIZE
<<<<<<< HEAD:Implementierung/src/org/knipsX/controller/projectmanagement/ProjectCopyController.java
                        JOptionPane.showMessageDialog(null, Messages.getString("ProjectCopyController.5"), //$NON-NLS-1$
                                Messages.getString("ProjectCopyController.6"), JOptionPane.ERROR_MESSAGE); //$NON-NLS-1$
=======
                        JOptionPane.showMessageDialog(this.view, "Projektname ungültig oder leer!",
                                "Projekt erstellen - Fehler", JOptionPane.ERROR_MESSAGE);
>>>>>>> 44fd20c5f0461be4bd8a4c755c4427684a386989:Implementierung/src/org/knipsX/controller/projectmanagement/ProjectCopyController.java
                    }

                    /* user has given a correct name */
                    if (Validator.isStringOk(projectName)) {
                        this.model.copyProject(projectToCopy, projectName);
                    }
                }
            }

        } else if (toCopy.length == 0) {

            /* gives the user a hint, that he has selected no projects */
            // INTERNATIONALIZE
<<<<<<< HEAD:Implementierung/src/org/knipsX/controller/projectmanagement/ProjectCopyController.java
            JOptionPane.showMessageDialog(null, Messages.getString("ProjectCopyController.7"), //$NON-NLS-1$
                    Messages.getString("ProjectCopyController.8"), JOptionPane.ERROR_MESSAGE); //$NON-NLS-1$
=======
            JOptionPane.showMessageDialog(this.view, "Selektieren Sie ein Projekt, um es zu kopieren.",
                    "Projekt kopieren - Fehler", JOptionPane.ERROR_MESSAGE);
>>>>>>> 44fd20c5f0461be4bd8a4c755c4427684a386989:Implementierung/src/org/knipsX/controller/projectmanagement/ProjectCopyController.java
        } else {

            /* gives the user a hint, that he has selected too much projects */
            // INTERNATIONALIZE
<<<<<<< HEAD:Implementierung/src/org/knipsX/controller/projectmanagement/ProjectCopyController.java
            JOptionPane.showMessageDialog(null, Messages.getString("ProjectCopyController.9"), //$NON-NLS-1$
                    Messages.getString("ProjectCopyController.10"), JOptionPane.ERROR_MESSAGE); //$NON-NLS-1$
=======
            JOptionPane.showMessageDialog(this.view, "Selektieren Sie nur ein Projekt, um es zu kopieren.",
                    "Projekt kopieren - Fehler", JOptionPane.ERROR_MESSAGE);
>>>>>>> 44fd20c5f0461be4bd8a4c755c4427684a386989:Implementierung/src/org/knipsX/controller/projectmanagement/ProjectCopyController.java

        }
    }
}